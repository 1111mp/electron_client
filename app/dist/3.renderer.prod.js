(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./app/components/BasicComponent.tsx":function(e,n,t){"use strict";var o,i=t("react"),r=function(){function e(){this._allEvents={},"undefined"!=typeof window&&(Object.defineProperty(this,"_win",{get:function(){return t("electron").remote.getCurrentWindow()}}),Object.defineProperty(this,"_electron",{get:function(){return t("electron")}}))}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.bindWinEvents=function(e){var n=this;if(void 0===e&&(e=!0),this._win){var t=this._win,o=e?"on":"removeListener";["close","closed","blur","focus","show","ready-to-show","hide","maximize","unmaximize","enter-full-screen","leave-full-screen","minimize","restore"].forEach((function(e){t[o](e,(function(t){return n._onWindowStatusChanged&&n._onWindowStatusChanged(t,e)}))})),e||delete this._onWindowStatusChanged}},e.prototype.geCurrentWin=function(){if(this._electron)return this._electron.remote.getCurrentWindow()},e.prototype.send=function(e,n){this._electron&&this._electron.ipcRenderer.send(e,n)},e.prototype.on=function(e,n,t){var o=this;if(this._electron){if(n){if(this._allEvents[e])throw new Error("event: ["+e+"] has been bind!");this._allEvents[e]=n}this._electron.ipcRenderer[t?"once":"on"](e,(function(n,i){o._allEvents[e]&&o._allEvents[e](i),t&&o.remove(e)}))}},e.prototype.remove=function(e){this._electron&&e&&this._allEvents[e]&&(this._electron.ipcRenderer.removeListener(e,this._allEvents[e]),delete this._allEvents[e])},e.prototype.removeAll=function(){var e=this;this._electron&&Object.keys(this._allEvents).forEach((function(n){e._allEvents[n]&&(e._electron.ipcRenderer.removeListener(n,e._allEvents[n]),delete e._allEvents[n])}))},e.prototype.isResizable=function(){return this._win&&this._win.isResizable()},e.prototype.setResizable=function(e){this._win&&this._win.setResizable(e)},e.prototype.setMovable=function(e){this._win&&this._win.setMovable(e)},e.prototype.minimize=function(){this._win&&this._win.minimize()},e.prototype.maximize=function(){this._win&&this._win.maximize()},e.prototype.unmaximize=function(){this._win&&this._win.unmaximize()},e.prototype.setMaximumSize=function(e,n){this._win&&this._win.setMaximumSize(e,n)},e.prototype.setSize=function(e,n){this._win&&this._win.setSize(e,n)},e.prototype.getSize=function(){return this._win&&this._win.getSize()},e.prototype.setPosition=function(e,n){this._win&&this._win.setPosition(e,n)},e.prototype.getPosition=function(){return this._win?this._win.getPosition():[]},e.prototype.setFullScreen=function(e){this._win&&this._win.setFullScreen(e)},e.prototype.hide=function(){this._win&&this._win.hide()},e.prototype.close=function(){this._win&&this._win.close()},e.prototype.destroyed=function(){this.removeAll()},e}(),s=t("./app/utils/index.ts"),c=(o=function(e,n){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}o(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),a=function(e,n,t,o){var i,r=arguments.length,s=r<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,n,t,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(n,t,s):i(n,t))||s);return r>3&&s&&Object.defineProperty(n,t,s),s},u=t("./app/constants/listener.json");function l(e){var n=e.prototype.componentWillUnmount;e.prototype.componentWillUnmount=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n&&n.apply(this,e),this._unmount=!0};var t=e.prototype.setState;e.prototype.setState=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._unmount||t.apply(this,e)}}var d=function(e){function n(n){var t=e.call(this,n)||this;return t.$send=function(e,n){t.$renderer.send(e,n)},t.$on=function(e,n){t.$renderer.on(e,n)},t.$once=function(e,n){t.$renderer.on(e,n,!0)},t.$remove=function(e){t.$renderer.remove(e)},t.$bindWinEvents=function(e){void 0===e&&(e=!0),t.$renderer.bindWinEvents(e)},t.$onWindowStatusChanged=function(e){e&&(t.$renderer._onWindowStatusChanged=e)},t.$alert=function(e,n,o){return void 0===n&&(n="弹窗"),new Promise((function(i,r){t.$send(u.DIALOG_SHOW,{type:"alert",title:n,message:e,data:o}),t.$once(u.DIALOG_CONFIRM,(function(e){i(e.data)}))}))},t.$confirm=function(e,n,o){return void 0===n&&(n="弹窗"),new Promise((function(i,r){t.$send(u.DIALOG_SHOW,{type:"confirm",title:n,message:e,data:o}),t.$once(u.DIALOG_CONFIRM,(function(e){t.$remove(u.DIALOG_CANCEL),i(e.data)})),t.$once(u.DIALOG_CANCEL,(function(e){t.$remove(u.DIALOG_CONFIRM),r(e.data)}))}))},t.$addUrlQuery=function(e,n,t){if(void 0===t&&(t=!0),"undefined"==typeof window)return e;var o="";n&&Object.keys(n).forEach((function(e){o+=(o?"&":"")+e+"="+n[e]}));var i=Object(s.a)();return o="?"+o,(o=i&&t?Object(s.b)(o,i):o)?/\?/.test(e)?e+"&"+o.substr(1,o.length):e+o:e},t.$open=function(e){var n=e.url,o=e.width,i=e.height,r=e.id;"undefined"!=typeof window&&t.$send(u.CUSTOM_WIN_SHOW,{url:n,width:o,height:i,id:r})},t.$openBrowser=function(e){"undefined"!=typeof window&&t.$send(u.BROWSER_OPEN_URL,e)},t.$hide=function(){t.$renderer.hide()},t.$minimize=function(){t.$renderer.minimize()},t.$maximize=function(){t.$renderer.maximize()},t.$setMaximumSize=function(e,n){t.$renderer.$setMaximumSize(e,n)},t.$unmaximize=function(){t.$renderer.unmaximize()},t.$close=function(){t.$renderer.close()},t.$setFullScreen=function(e){t.$renderer.setFullScreen(e)},t.$geCurrentWin=function(){return t.$renderer.geCurrentWin()},t.$setSize=function(e,n){t.$renderer.isResizable()?t.$renderer.setSize(e,n):(t.$renderer.setResizable(!0),t.$renderer.setSize(e,n),t.$renderer.setResizable(!1))},t.$getSize=function(){return t.$renderer.$getSize()},t.$setPosition=function(e,n){t.$renderer.$setPosition(e,n)},t.$getPosition=function(){return t.$renderer.$getPosition()},t.$renderer=new r,t}return c(n,e),n.prototype.componentDidMount=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.didMount.apply(this,e)},n.prototype.didMount=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]},n.prototype.componentDidUpdate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.didUpdate.apply(this,e)},n.prototype.didUpdate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]},n.prototype.render=function(){return this.$render.apply(this)},n.prototype.$render=function(){return i.createElement(i.Fragment,null,"$render")},n.prototype.componentWillUnmount=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.$renderer.destroyed(),this.willUnmount.apply(this,e)},n.prototype.willUnmount=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]},n.prototype.$loadScript=function(e){var n;return new Promise((function(t,o){var i=document.querySelector("head"),r=document.createElement("script"),s=!1;r.src=e,r.onload=function(){i&&i.removeChild(r),clearTimeout(n),s||(s=!0,t())},i&&i.appendChild(r),n=window.setTimeout((function(){s||(o(),s=!0)}),1e4)}))},n=a([l],n)}(i.Component);n.a=d},"./app/components/browser/browser.global.scss":function(e,n,t){},"./app/components/browser/index.tsx":function(e,n,t){"use strict";t.r(n);t("./app/components/browser/browser.global.scss");var o,i=t("react"),r=t("./app/components/BasicComponent.tsx"),s=t("./app/config/index.ts"),c=(o=function(e,n){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}o(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),a=t("electron-tabs"),u=t("./app/constants/listener.json"),l=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={iscrollInstance:null,activeWebView:null,isMaximized:!1,canGoBack:!1,canGoForward:!1},n.openUrl=function(e){n.tabGroup&&n.tabGroup.addTab({title:"loading...",active:!0,src:e,ready:function(e){return n.initTabWebView(e)}})},n.initTabWebView=function(e){var t=n.state.iscrollInstance,o=e.webview;e.on("close",(function(e){t?t.refresh():n.initIscroll()})),o.addEventListener("dom-ready",(function(){e.setTitle(o.getTitle()),o.insertCSS("\n          ::-webkit-scrollbar {\n            width: 6px;\n            height: 6px;\n            background: transparent;\n          }\n          ::-webkit-scrollbar-thumb {\n            background: rgba(0,0,0,0.1);\n            border-radius: 3px;\n          }\n          ::-webkit-scrollbar-thumb:hover {\n            background: rgba(0,0,0,0.2);\n          }\n        "),t?(t.refresh(),t.scrollToElement(e.tab,500)):n.initIscroll()})),o.addEventListener("new-window",(function(e){console.log(e),n.openUrl(e.url)})),o.addEventListener("did-fail-load",(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];console.log("load failed",e)}))},n.initIscroll=function(){Promise.resolve().then(t.t.bind(null,"iscroll",7)).then((function(e){var t=new(0,e.default)(n.refs.iscroll,{mouseWheel:!0,scrollX:!0,preventDefault:!1});n.setState({iscrollInstance:t})}))},n.setMaximize=function(e){var t=e?"$maximize":"$unmaximize";n.setState({isMaximized:e},(function(){n[t](),!e&&n.$setSize(s.a.width,s.a.height)}))},n.renderHistory=function(){var e=n.state,t=e.activeWebView,o=e.canGoBack,r=e.canGoForward;return i.createElement("ul",{className:"icons-container"},i.createElement("li",{className:"icon-history "+(o?"":"history-disabled"),style:{marginRight:"2px"},onMouseDown:function(e){return e.stopPropagation()},onClick:function(){return t&&t.goBack()}},i.createElement("i",{className:"iconfont iconpre"})),i.createElement("li",{className:"icon-history "+(r?"":"history-disabled"),onMouseDown:function(e){return e.stopPropagation()},onClick:function(){return t&&t.goForward()}},i.createElement("i",{className:"iconfont iconnext"})),i.createElement("li",{className:"icon-history",onMouseDown:function(e){return e.stopPropagation()},onClick:function(){return t&&t.reload()}},i.createElement("i",{className:"iconfont iconshuaxin"})))},n.renderController=function(){var e=n.state.isMaximized;return i.createElement("ul",{className:"icons-container"},i.createElement("li",{className:"icon-item",style:{marginRight:"8px"},onMouseDown:function(e){return e.stopPropagation()},onClick:function(){return n.$minimize()}},i.createElement("i",{className:"iconfont icontop-minimum"})),i.createElement("li",{className:"icon-item",style:{marginRight:"8px"},onMouseDown:function(e){return e.stopPropagation()},onClick:function(){return n.setMaximize(!e)}},i.createElement("i",{className:"iconfont "+(e?"icontop-tonormal ":"icontop-maximize")})),i.createElement("li",{className:"icon-item",onMouseDown:function(e){return e.stopPropagation()},onClick:function(){return n.$close()}},i.createElement("i",{className:"iconfont icontop-close"})))},n}return c(n,e),n.prototype.didMount=function(){var e=this;this.$on(u.BROWSER_OPEN_URL,(function(n){e.openUrl(n.data)}));var n=this.tabGroup=new a({});n.on("tab-added",(function(n){n.on("inactive",(function(n){setTimeout((function(){var n=e.state.activeWebView;e.setState({canGoBack:n.canGoBack(),canGoForward:n.canGoForward()})}))})),n.webview.addEventListener("dom-ready",(function(){e.setState({canGoBack:n.webview.canGoBack(),canGoForward:n.webview.canGoForward()}),n.webview.addEventListener("did-navigate-in-page",(function(){e.setState({canGoBack:n.webview.canGoBack(),canGoForward:n.webview.canGoForward()})}))}))})),n.on("tab-active",(function(n,t){e.setState({activeWebView:n.webview});var o=e.state.iscrollInstance;o&&o.scrollToElement(n.tab,500)})),n.on("tab-removed",(function(n,t){!t.tabs.length&&e.$close()}))},n.prototype.$render=function(){return i.createElement(i.Fragment,null,i.createElement("div",{className:"etabs-tabgroup"},this.renderHistory(),i.createElement("div",{className:"browser-tabs-container",ref:"iscroll"},i.createElement("div",{className:"etabs-tabs"})),i.createElement("div",{className:"empty"}),this.renderController()),i.createElement("div",{className:"etabs-views"}))},n}(r.a);n.default=l},"./app/constants/listener.json":function(e){e.exports=JSON.parse('{"MAIN_DEVTOOLS":"devtools","DIALOG_SHOW":"dialog-show","DIALOG_CONFIRM":"dialog-confirm","DIALOG_CANCEL":"dialog-cancel","CUSTOM_WIN_SHOW":"custom-win-show","CUSTOM_WIN_CLOSE":"custom-win-close","BROWSER_OPEN_URL":"browser-open-url"}')},"./app/utils/index.ts":function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return c})),t.d(n,"c",(function(){return a}));var o=t("query-string"),i=/[?&]([^=&#]+)=([^&#]*)/g,r=/[?&]([^=&#]+)=([^&#]*)/;function s(e){return"undefined"==typeof window?"":c(e||window.location.href||"")}function c(e,n){void 0===n&&(n="");var t=function(e,n){void 0===n&&(n="");var t=e.match(i),o=n.match(i),s=function(e){var n={};return e&&e.forEach((function(e){var t=e.match(r);t&&(n[t[1]]=t[2])})),n};return Object.assign(s(o),s(t))}(e,n),o="";return Object.keys(t).forEach((function(e){o+=(o?"&":"")+e+"="+t[e]})),o?"?"+o:""}function a(e){return e?o.parse(e):"undefined"==typeof window?{}:o.parse(s())}}}]);
//# sourceMappingURL=3.renderer.prod.js.map